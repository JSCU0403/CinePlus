<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="board.model.BoardBean">
	
	<!-- 목록보기 -->
	<select id="GetBoardList" resultType="board.model.BoardBean">
		select movie_num, classification, question, qdate, content, hits
		from (select rownum as rank, movie_num, classification, question, qdate, content, hits
		from (select movie_num, classification, question, qdate, content, hits
		from FAQ
		order by movie_num desc))
		<if test="whatColumn == 'classification'">
		where classification like #{keyword}
		</if>
		<if test="whatColumn == 'question'">
		where question like #{keyword}
		</if>
		<if test="whatColumn == 'content'">
		where content like #{keyword}
		</if>
	</select>
	
	
	<!-- 검색기능(카테고리,제목,내용) -->
	<select id="GetTotalCount" resultType="Integer">
		select count(*) from FAQ
		<if test="whatColumn == 'classification'">
		where classification like #{keyword}
		</if>
		<if test="whatColumn == 'question'">
		where question like #{keyword}
		</if>
		<if test="whatColumn == 'content'">
		where content like #{keyword}
		</if>
	</select>
	
	
	<!-- 삽입작업 (절대 resultType은 쓰면 x) -->
	<insert id="InsertBoard">
		insert into FAQ(movie_num, classification, question, qdate, content, hits)
		values(FAQ_seq.nextval, #{classification}, #{question}, sysdate, #{content},0)
	</insert>
	
	<!-- 상세보기 -->
	<select id="GetOneBoard" resultType="board.model.BoardBean">
  		select * from FAQ
  		where movie_num = #{movie_num}
  	</select>
  	
  	<update id="UpdateCount">
		update FAQ set hits = hits+ 1 
		where movie_num = #{movie_num}
	</update>
	
</mapper>




